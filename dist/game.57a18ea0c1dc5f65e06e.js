!function(){"use strict";var t,e,i,n={6419:function(t,e,i){i.d(e,{oh:function(){return T},Q1:function(){return x},fb:function(){return b}});var n=i(5629);const s="START_SPIN",o="FAST_STOP",r="REEL_STOPPED",h="LOCK_UI",a="UNLOCK_UI";var l=i(5880);const c=["SYM1","SYM5","SYM1","SYM3","SYM4","SYM3","SYM2","SYM4","SYM3","SYM6","SYM3","SYM1","SYM6","SYM1","SYM2","SYM1","SYM2","SYM2","SYM2","SYM1","SYM2","SYM1","SYM4","SYM1","SYM3","SYM6","SYM1","SYM3","SYM2","SYM5","SYM3","SYM1","SYM2","SYM2","SYM2","SYM1","SYM4","SYM1","SYM4","SYM1","SYM3","SYM2","SYM4","SYM4","SYM5","SYM2","SYM3","SYM1","SYM1","SYM1","SYM4","SYM5","SYM2","SYM2","SYM2","SYM1","SYM5","SYM6","SYM1","SYM3","SYM4","SYM2","SYM5","SYM2","SYM1","SYM5","SYM1","SYM2","SYM1","SYM1","SYM1","SYM4","SYM4","SYM3","SYM3","SYM5","SYM5","SYM4","SYM2","SYM5","SYM2","SYM1","SYM3","SYM2","SYM3","SYM1","SYM4","SYM3","SYM4","SYM2","SYM3","SYM4","SYM1","SYM1","SYM1","SYM2","SYM6","SYM3","SYM2","SYM3","SYM1","SYM5"],u={fontFamily:"Arial",fontSize:50,fontWeight:"bold",fill:16753920,stroke:{color:0,width:3},align:"center"},d="Win: $",p="Balance: $";class f extends n.mcf{constructor(t){super(),this.img=new n.kxk(n.sP.get(t+".png")),this.img.anchor.set(0,0),this.addChild(this.img)}setId(t){this.img.texture=n.sP.get(t+".png")}}var S=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{a(n.next(t))}catch(t){o(t)}}function h(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,h)}a((n=n.apply(t,e||[])).next())}))};class M extends n.mcf{constructor(){super(),this.rows=3,this.reelSize=this.rows+2,this.yOffset=0,this.speed=3e3,this.startNudge=.4,this.stopDipRatio=.4,this.stopDuration=.1,this.symbols=[],this.ids=[],this.ticker=null,this.stopTween=null,this.insertionQueue=null,this.mode="idle";for(let t=0;t<this.reelSize;t++){this.ids.push(c[t]);const e=new f(this.ids[t]);e.y=e.height*t,this.addChild(e),this.symbols.push(e)}this.symHeight=this.symbols[0].height}spin(){return S(this,void 0,void 0,(function*(){"spinning"!==this.mode&&(yield l.Ay.to(this,{y:this.symHeight*this.startNudge*-1,duration:.12,ease:"power2.out"}),yield l.Ay.to(this,{y:0,duration:.12,ease:"power2.in"}),this.mode="spinning",this.ticker||(this.ticker=()=>{if("spinning"!==this.mode)return;const t=l.Ay.ticker.deltaRatio()/60;this.advanceWithQueue(this.speed*t)},l.Ay.ticker.add(this.ticker)))}))}stop(t){return S(this,void 0,void 0,(function*(){if("spinning"!==this.mode)return;const e=c.length,i=t[0]%e,n=t[1]%e,s=t[2]%e,o=c[(s+1)%e],h=c[i],a=c[n],u=c[s],d=c[(i-1+e)%e],p=Math.max(5,Math.round(this.stopDuration*this.speed/this.symHeight)),f=this.symHeight-this.yOffset%this.symHeight+(p-1)*this.symHeight,S=Math.max(0,p-5);this.insertionQueue=[];for(let t=0;t<S;t++)this.insertionQueue.push(this.randomId());this.insertionQueue.push(d,u,a,h,o),this.mode="idle";const M={t:0,prev:0};this.stopTween&&this.stopTween.kill(),this.stopTween=l.Ay.to(M,{t:f,duration:this.stopDuration,ease:"power2.out",onUpdate:()=>{const t=M.t-M.prev;M.prev=M.t,this.advanceWithQueue(t)}}),yield this.stopTween;const g=this.symHeight-this.yOffset;g>0&&g<.5*this.symHeight&&this.advanceWithQueue(g),this.insertionQueue=null,this.yOffset=0,this.positionSprites();const Y=this.symHeight*this.stopDipRatio,m=this.y,w=m+Y;yield l.Ay.to(this,{y:w,duration:.12,ease:"power1.out"}),yield l.Ay.to(this,{y:m,duration:.22,ease:"power2.out"}),console.log("Reel stopped"),T.emit(r)}))}randomId(){return c[Math.random()*c.length|0]}rowBaseY(t){return(t-1)*this.symHeight}positionSprites(){for(let t=0;t<this.reelSize;t++)this.symbols[t].y=this.rowBaseY(t)+this.yOffset}applyIds(){for(let t=0;t<this.reelSize;t++)this.symbols[t].setId(this.ids[t])}advanceWithQueue(t){if(!(t<=0)){for(this.yOffset+=t;this.yOffset>=this.symHeight;){this.yOffset-=this.symHeight;for(let t=this.reelSize-1;t>=1;t--)this.ids[t]=this.ids[t-1];const t=this.insertionQueue&&this.insertionQueue.length>0?this.insertionQueue.shift():this.randomId();this.ids[0]=t,this.applyIds()}this.positionSprites()}}}class g extends n.mcf{constructor(){super(),this.reel=new M,this.reelContainer=new n.mcf,this.balanceText=new n.EYj({text:p+0,style:u}),this.winsText=new n.EYj({text:d+0,style:u}),this.spinTimeOut=null,this.addChild(this.reelContainer),this.createReelBg(),this.createReel(),this.resizeTxt(),this.addChild(this.balanceText),this.addChild(this.winsText),T.on("SHOW_WIN",(()=>{}))}createReel(){this.reelContainer.addChild(this.reel),this.reel.x=.5*(this.reelContainer.width-this.reel.width),this.reelContainer.position.set(.5*(b-this.reelContainer.width),.25*(x-this.reelContainer.height))}createReelBg(){const t=new n.kxk(n.sP.get("REEL.png"));this.reelContainer.addChild(t);const e=(new n.A1g).rect(t.x,t.y+.015*t.height,t.width,.97*t.height).fill(16711680,.4);this.reelContainer.addChild(e),this.reelContainer.mask=e}startSpin(t){this.reel.spin(),console.log("start spin"),this.spinTimeOut=setTimeout((()=>{this.reel.stop(t),this.spinTimeOut=null}),3e3)}fastStop(t){null!==this.spinTimeOut&&(clearTimeout(this.spinTimeOut),this.spinTimeOut=null),this.reel.stop(t),console.log("fast stop")}updateBalance(t){this.balanceText.text=p+t.toFixed(2),this.resizeTxt()}updateWins(t){this.winsText.text=d+t.toFixed(2),this.resizeTxt()}resizeTxt(){this.winsText.position.set(.05*b,.1*x),this.balanceText.position.set(b-1.1*this.balanceText.width,.1*x)}}var Y=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{a(n.next(t))}catch(t){o(t)}}function h(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,h)}a((n=n.apply(t,e||[])).next())}))};class m{constructor(t,e,i){this.wallet=t,this.slot=e,this.wins=i,this.state="idle",this.makeBalanceCheck(),T.on(s,this.spin,this)}spin(){return Y(this,void 0,void 0,(function*(){if("idle"!==this.state)return;T.emit(h);if(!this.wallet.placeBet())return this.state="idle",T.emit(h,!0),void console.log("Bet failed");this.makeBalanceCheck();const t=this.wins.getSpinResult();if(this.slot.startSpin(t.stopPositions),T.once(o,this.fastStop,this),this.state="spinning",yield this.waitForReelStop(),t.multi>0){const e=this.wallet.payout(t.multi);this.slot.updateWins(e)}this.state="idle",T.emit(a)}))}fastStop(){return Y(this,void 0,void 0,(function*(){if("spinning"!==this.state)return;const t=this.wins.getCurrentResult();t&&this.slot.fastStop(t.stopPositions),yield this.waitForReelStop(),this.state="idle",T.emit(a)}))}waitForReelStop(){return Y(this,void 0,void 0,(function*(){return new Promise((t=>{T.once(r,(()=>{t()}))}))}))}makeBalanceCheck(){const t=this.wallet.balance;let e=!1;t<=0&&(e=!0,console.log("Insufficient funds...")),T.emit(h,e),this.slot.updateBalance(t),this.slot.updateWins(0)}}class w{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._currentBet=1,this._balance=t}get balance(){return this._balance}placeBet(){if(this._currentBet>this._balance)throw new Error("Insufficient funds...");return this._balance-=this._currentBet,!0}payout(t){return this._balance+=this._currentBet*t,this._currentBet*t}}class y{constructor(){this.currentResult=void 0}getSpinResult(){const t=Math.floor(Math.random()*c.length),e=this.getSymbols(t),i=this.windowIndexes(t),n=this.evaluateWin(e);return this.currentResult={stopPositions:i,multi:n},{stopPositions:i,multi:n}}getCurrentResult(){if(this.currentResult)return this.currentResult}getSymbols(t){const e=c.length;return[c[t],c[(t+1)%e],c[(t+2)%e]]}windowIndexes(t){const e=c.length;return[t,(t+1)%e,(t+2)%e]}evaluateWin(t){const[e,i,n]=t;return e===i&&i===n?3:e===i||e===n||i===n?2:0}}var v=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{a(n.next(t))}catch(t){o(t)}}function h(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,h)}a((n=n.apply(t,e||[])).next())}))};const b=1280,x=720,T=new n.bkB;console.log("%cPixiJS V8\nTypescript Boilerplate%c 1.0.0-r %chttp://www.pixijs.com %c❤️","background: #ff66a1; color: #FFFFFF; padding: 2px 4px; border-radius: 2px; font-weight: bold;","color: #D81B60; font-weight: bold;","color: #C2185B; font-weight: bold; text-decoration: underline;"),v(void 0,void 0,void 0,(function*(){const t=new n.lgM;function e(){const e=Math.min(window.innerWidth/b,window.innerHeight/x),i=Math.ceil(b*e);let n=Math.ceil(x*e);window.innerHeight>window.innerWidth&&(n=i),console.log("Resizing to w:"+i+" h:"+n),t.renderer.resize(i,n),t.stage.scale.set(e)}yield new Promise((t=>{window.addEventListener("load",t)})),yield t.init({backgroundColor:13882323,width:b,height:x}),yield function(){return v(this,void 0,void 0,(function*(){yield n.sP.init({manifest:{bundles:[{name:"sheet",assets:[{alias:"sheet",src:"./assets/sheet.json"}]}]}}),yield n.sP.loadBundle(["sheet"]),document.body.appendChild(t.canvas),window.onresize=()=>e(),function(){e();const i=new g;t.stage.addChild(i),new m(new w(100),i,new y)}(),function(){const e=new n.kxk(n.sP.get("PLAY.png"));e.position.set(.5*(b-e.width),.7*x),e.eventMode="static",e.on("pointerdown",(()=>T.emit(s))),t.stage.addChild(e);const i=new n.kxk(n.sP.get("STOP.png"));i.position=e.position,i.eventMode="none",i.visible=!1,i.on("pointerdown",(()=>{T.emit(o),i.eventMode="none",i.visible=!1})),t.stage.addChild(i),T.on(h,(t=>{e.eventMode="none",e.texture=n.sP.get("PLAY_DISABLED.png"),t||setTimeout((()=>{i.visible=!0,i.eventMode="static"}),300)})),T.on(a,(()=>{e.eventMode="static",e.texture=n.sP.get("PLAY.png"),i.visible=!1,i.eventMode="none"}))}()}))}()}))}},s={};function o(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={exports:{}};return n[t](i,i.exports,o),i.exports}o.m=n,t=[],o.O=function(e,i,n,s){if(!i){var r=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],s=t[c][2];for(var h=!0,a=0;a<i.length;a++)(!1&s||r>=s)&&Object.keys(o.O).every((function(t){return o.O[t](i[a])}))?i.splice(a--,1):(h=!1,s<r&&(r=s));if(h){t.splice(c--,1);var l=n();void 0!==l&&(e=l)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[i,n,s]},o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,i){return o.f[i](t,e),e}),[]))},o.u=function(t){return"game."+{62:"689877dbd76005152e4d",151:"ad4ca304152e10d7d3d9",162:"2a70a75a90be0ff2cf44",390:"80f03272d31adec1777f",751:"23133e94bf6f1c9cdb64",914:"fd1944e36e56b30e69d9"}[t]+".js"},o.miniCssF=function(t){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e={},i="pixi-typescript-boilerplate:",o.l=function(t,n,s,r){if(e[t])e[t].push(n);else{var h,a;if(void 0!==s)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==i+s){h=u;break}}h||(a=!0,(h=document.createElement("script")).charset="utf-8",h.timeout=120,o.nc&&h.setAttribute("nonce",o.nc),h.setAttribute("data-webpack",i+s),h.src=t),e[t]=[n];var d=function(i,n){h.onerror=h.onload=null,clearTimeout(p);var s=e[t];if(delete e[t],h.parentNode&&h.parentNode.removeChild(h),s&&s.forEach((function(t){return t(n)})),i)return i(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:h}),12e4);h.onerror=d.bind(null,h.onerror),h.onload=d.bind(null,h.onload),a&&document.head.appendChild(h)}},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=i[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t}(),function(){var t={792:0};o.f.j=function(e,i){var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise((function(i,s){n=t[e]=[i,s]}));i.push(n[2]=s);var r=o.p+o.u(e),h=new Error;o.l(r,(function(i){if(o.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;h.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",h.name="ChunkLoadError",h.type=s,h.request=r,n[1](h)}}),"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,s,r=i[0],h=i[1],a=i[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(n in h)o.o(h,n)&&(o.m[n]=h[n]);if(a)var c=a(o)}for(e&&e(i);l<r.length;l++)s=r[l],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(c)},i=self.webpackChunkpixi_typescript_boilerplate=self.webpackChunkpixi_typescript_boilerplate||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var r=o.O(void 0,[410],(function(){return o(6419)}));r=o.O(r)}();